[TOC]

# JVM和DVM和ART的比较

### 参考

* [**JVM、DVM、ANDROID RUN TIME(art)的区别（简易篇）**](https://www.jianshu.com/p/2bdc60e118f5)

## 一、JVM和DVM的区别

### 1.1 前言

```text
JVM即Java Virtual Machine，而DVM就是Dalvik Virtual Machine。
```

### 1.2 DVM

```text
Android系统使用DVM作为虚拟机，所有的安卓程序都运行在安卓系统进程里，每个进程都对应一个Dalvik虚拟机实例。他们都提供了对象生命周期管理、堆栈管理、线程管理、安全和异常管理以及垃圾回收等重要功能，各自拥有一套完整的指令系统。
```

### 1.3 区别

* JVM运行的是java字节码，即.class文件；DVM运行的dalvik字节码，即.dex(dalvik executable)文件

* .dex可执行文件体积更小

  ```text
  .class文件包含多个不同的方法签名，
  如果A类文件引用B类文件中的方法，方法签名也会被复制到A类文件中，也就是说，多个不同的类会同时包含相同的方法签名，
  同样地，大量的字符串常量在多个类文件中也被重复使用，这些冗余信息会增加文件的体积，
  而JVM在把描述类的数据从class文件加载到内存时，需要对数据进行校验、转换解析和初始化。
  由于大量的冗余信息，会严重影响虚拟机解析文件的效率
  
  为了减少执行文件的体积，安卓使用DVM，
  SDK中有个dx工具负责将java字节码转换成dalvik字节码，
  dx工具对.class文件重新排列，将所有.class文件中的常量池分解，消除其中的冗余信息，重新组合形成一个常量池，
  所有的类文件共享同一个常量池，使得相同的字符串、常量在dex文件中只出现一次，从而减少了文件的体积。
  ```

  



