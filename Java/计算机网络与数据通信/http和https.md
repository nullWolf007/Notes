[TOC]



# http和https

## 1. http和https含义

### 1.1 http

> 超文本传输协议，是一个基于请求与响应，无状态的，应用层的协议，常基于TCP/IP协议传输数据，互联网上应用最为广泛的一种网络协议,所有的WWW文件都必须遵守这个标准。设计HTTP的初衷是为了提供一种发布和接收HTML页面的方法。

### 1.2 https

> HTTPS是一种通过计算机网络进行安全通信的传输协议，经由HTTP进行通信，利用SSL/TLS建立全信道，加密数据包。HTTPS使用的主要目的是提供对网站服务器的身份认证，同时保护交换数据的隐私与完整性。
>
> TLS是传输层加密协议，前身是SSL协议，由网景公司1995年发布，有时候两者不区分。

## 2.http和https的区别

### 2.1 http特点

* 无状态：协议对客户端没有状态存储，对事物处理没有“记忆”能力，比如访问一个网站需要反复进行登录操作

* 基于请求和响应：基本的特性，由客户端发起请求，服务端响应

* 简单快速、灵活

* 通信使用明文、请求和响应不会对通信方进行确认、无法保护数据的完整性

### 2.2 https特点

* 内容加密：采用混合加密技术，中间者无法直接查看明文内容
* 验证身份：通过证书认证客户端访问的是自己的服务器
* 保护数据完整性：防止传输的内容被中间人冒充或者篡改

## 3.https原理

![图片](https://github.com/nullWolf007/images/raw/master/android/%E7%BD%91%E7%BB%9C/android_net.png)

### 提要

* 客户端发送https请求
* 服务端需要申请证书，并保存在服务器端
* 服务器端存在 公钥和私钥  采用非对称加密   
* 服务器把证书  发送给客户端
* 客户端验证证书的有效性，并拿到服务器的公钥，同时客户端产生一个对称加密 密钥 
* 客户端 把密钥通过服务器端公钥进行加密 发送给服务器端
* 服务器端采用非对称加密  使用私钥对数据进行解密  得到客户端的对称加密的密钥
* 然后客户端和服务端使用该密钥 进行对称加密

### 证书

* 服务器端拿着公钥去CA申请证书，CA用自己的私钥对服务器的公钥进行加密，并加上证书的过期时间之类的信息，拼在一起就是数字证书了，然后CA把证书给服务器端
* 各种操作系统里都内置了所有权威CA的公钥
* 服务器端把证书发给客户端  客户端使用内置的CA公钥进行解密，如果能够解密成功，则证明证书有效，并且能拿到服务器的公钥。若不能解密成功，则说明此证书不安全，不会进行后续操作

## 参考文献

* [**HTTP和HTTPS协议，看一篇就够了**](https://blog.csdn.net/xiaoming100001/article/details/81109617)
* [**HTTPS理论基础及其在Android中的最佳实践**](https://blog.csdn.net/iispring/article/details/51615631)



